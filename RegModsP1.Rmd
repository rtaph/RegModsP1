---
title: 'Regression Models: Course Project'
author: "rtaph"
date: "December 21, 2014"
output: pdf_document
---

******************************
```{r chunkOpts, message = FALSE, echo=FALSE, autodep=TRUE}
  # load needed libraries, set global options, and working directory
  library(knitr)
  opts_chunk$set(echo = TRUE)       
  setwd("~/Documents/Courses/datasciencecoursera/RegModsP1/")
```

## Executive Summary
The goal of this assignment is to find a relationship between a set of variables and miles per gallon (MPG) from the `mtcars` dataset. I particular, I am looking at the following two questions:

* Is an automatic or manual transmission better for MPG?
* What is the MPG difference between automatic and manual transmissions?
  
## Exploratory Data Analysis

```{r chunkLoadData, cache = TRUE, echo=FALSE}
  # load data
  data(mtcars)
  mtcars$am = as.logical(mtcars$am)
```

I have pr-processed so that `am` is converted to a logical variable instead of a numeric one. A number of exploratory charts are presented in the appendices. From initial inspection, there appears to be strong correlation between mpg and the `cyl`, `disp`, `wt` variables (the regressionn lines seem to fit the data well). 

### Model 1

I begin the analysis by fitting a simple linear regression model of mpg to one of the hypothesized covariates from the exploratory stage. In this case, I have chosen to model automatic transmission, `am`. The coefficients of the model are presented here:

```{r chunkMod1, cache = TRUE, echo=FALSE, autodep=TRUE}
  # Fit a regression model of mpg to automatic transmission
  mod1 = lm(mpg~am, data = mtcars)
  summary(mod1)$coefficients
```

The interpretation of this mod

Many other simple linear models could be fit. My strategy for model selection is to

A review of the model summary (see appendices) reveals that the t-test for $H_{0}: \beta_{mpg} = 0$ versus $H_{a}: \beta_{mpg} \neq 0$ is statistically signficant (*p* < .01).

```{r chunkMod2, cache = TRUE, echo=FALSE, autodep=TRUE}
  # Fit a step-wise regression model
  mod2 <- lm(mpg~., data = mtcars)
  aicFormula <- step(mod2, direction = "backward", trace = FALSE)
  aicFormula$coefficients
```

The coefficient interpretation is that holding all other variables fixed, `mpg` XXX...

The multivariate model improves our regression significantly compared to the initial model (RSS of `r round(anova(aicFormula, mod1)$RSS[1],0)` vs `r round(anova(aicFormula, mod1)$RSS[2],0)`). 

The diagnostic plots (appendix B) reveal that there is no apparent heteroskedasticity or correlation between the standarized residuals. The Q-Q plot fits the identify line nicely, suggesting our data is normally distributed and that our parametic tests are appropriate.



#### Model 2

```{r chunkCompMods, cache = TRUE, echo=FALSE, autodep=TRUE}
  print(anova(aicFormula, mod1))
```
There is a significant reduction in the residual sum of squares by using the multivariate model. This difference is significant (*p* < .01).

coefficient Interpretation
we estimate an expected XX 
## Findings

Uncertainty in the models can be quantified with the confidence intervals.

# Appendices
### Appendix A: Exploratory Charts

```{r chunkApendixA1, cache = TRUE, echo=FALSE, autodep=TRUE}
  pairs(mtcars, panel = panel.smooth, lwd = 2, pch=".", cex = 3)
```

```{r chunkApendixA2, cache = TRUE, echo=FALSE, autodep=TRUE}
  library(car)
  scatterplotMatrix(~mpg+disp+drat+wt|cyl, data=mtcars,main="Exploratory Chart")
```


### Appendix B: Model Diagnostic Plots
```{r chunkApendixB1, cache = TRUE, echo=FALSE, autodep=TRUE}
  #
  par(mfrow = c(2,2))
  plot(mod2)
```